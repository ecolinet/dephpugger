#!/usr/local/bin/php
<?php

$projectPath = getcwd();
$phpPath = dirname(php_ini_loaded_file());
$phpPath = 'php';
$defaultPort = 8888;
$defaultHost = 'localhost';

$command = "{$phpPath} -S {$defaultHost}:{$defaultPort} -t {$projectPath} -dxdebug.remote_enable=1 -dxdebug.remote_mode=req -dxdebug.remote_port=9005 -dxdebug.remote_host=127.0.0.1 -dxdebug.remote_connect_back=0";

$version = 'v' . file_get_contents(__DIR__ . '/../version');
echo <<<EOL
  _____             _                                       
 |  __ \           | |                                      
 | |  | | ___ _ __ | |__  _ __  _   _  __ _  __ _  ___ _ __ 
 | |  | |/ _ \ '_ \| '_ \| '_ \| | | |/ _` |/ _` |/ _ \ '__|
 | |__| |  __/ |_) | | | | |_) | |_| | (_| | (_| |  __/ |   
 |_____/ \___| .__/|_| |_| .__/ \__,_|\__, |\__, |\___|_|   
             | |         | |           __/ | __/ |          
             |_|         |_|          |___/ |___/           

                                   Server - Version: $version


EOL;

echo "Running command: {$command}\n\n";
echo "Access in {$defaultHost}:{$defaultPort}" . PHP_EOL;

shell_exec($command);
